<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<!-- Meta Pixel Code -->
  <script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '1549364576305752');
  fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=1549364576305752&ev=PageView&noscript=1"
  /></noscript>
  <!-- End Meta Pixel Code -->
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-W0NY5MHXND"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-W0NY5MHXND');
  </script>
<meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <title>Panel de Administración – NERIN</title>
        <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css"
    />
      <link rel="stylesheet" href="/style.css?v=cartfix-2" />
    <style>
      #admin-build-banner {
        margin: 0 auto 1.25rem;
        padding: 0.6rem 1rem;
        max-width: 480px;
        border-radius: 999px;
        background: rgba(37, 99, 235, 0.12);
        color: #1d4ed8;
        font-weight: 600;
        text-align: center;
        letter-spacing: 0.02em;
        box-shadow: inset 0 0 0 1px rgba(37, 99, 235, 0.2);
      }
      .orders-banner {
        background: var(--color-surface, #f6f6f6);
        border: 1px solid var(--color-border);
        border-radius: var(--radius);
        padding: 1rem 1.25rem;
        margin-bottom: 1.5rem;
        font-weight: 500;
      }
      .orders-filters {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        align-items: flex-end;
        margin-bottom: 1rem;
      }
      .orders-filters .filter-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        min-width: 180px;
      }
      .orders-filters label {
        font-weight: 600;
      }
      .filter-inline {
        display: flex;
        gap: 0.5rem;
        align-items: center;
      }
      .filter-inline input[type="date"] {
        flex: 1 1 auto;
      }
      .filter-toggle {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 600;
      }
      .orders-pagination {
        display: flex;
        justify-content: flex-end;
        align-items: center;
        gap: 0.75rem;
        margin-top: 0.75rem;
      }
      .orders-pagination button {
        padding: 0.35rem 0.75rem;
      }
      .order-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
      }
      .order-actions button,
      .order-actions .button {
        padding: 0.35rem 0.75rem;
      }
      .order-detail {
        margin-top: 1.5rem;
        border: 1px solid var(--color-border);
        border-radius: var(--radius);
        padding: 1.25rem;
        background: var(--color-surface, #fff);
      }
      .order-detail h4 {
        margin-top: 0;
        margin-bottom: 0.75rem;
      }
      .order-detail .detail-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 0.75rem 1.25rem;
      }
      #ordersTable tr.is-selected {
        outline: 2px solid var(--color-primary, #2563eb);
        outline-offset: -2px;
      }
      .order-detail dl {
        margin: 0;
      }
      .order-detail dt {
        font-weight: 600;
        margin-bottom: 0.35rem;
      }
      .order-detail dd {
        margin: 0;
        color: var(--color-text-muted, #555);
      }
      .order-items-list {
        margin-top: 1rem;
        padding-left: 1.25rem;
      }
      .order-row--deleted {
        opacity: 0.55;
      }
      .order-badge {
        display: inline-block;
        margin-left: 0.5rem;
        padding: 0.15rem 0.4rem;
        border-radius: 999px;
        background: #fee2e2;
        color: #b91c1c;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
      }
      .calculator-wrapper {
        margin-top: 1.5rem;
        padding: 1.5rem;
        background: var(--color-surface, #fff);
        border: 1px solid var(--color-border);
        border-radius: calc(var(--radius, 8px) * 2);
        box-shadow: 0 12px 24px rgba(15, 23, 42, 0.08);
      }
      .calculator-header h2 {
        margin: 0 0 0.75rem;
        font-size: 1.5rem;
      }
      .calculator-header p {
        margin: 0 0 0.75rem;
        color: var(--color-text-muted, #555);
        line-height: 1.6;
      }
      .calculator-header a {
        color: var(--color-primary, #2563eb);
        font-weight: 600;
        text-decoration: none;
      }
      .calculator-header a:hover {
        text-decoration: underline;
      }
      .calculator-frame {
        margin: 1.5rem 0;
        border-radius: calc(var(--radius, 8px) * 1.75);
        overflow: hidden;
        border: 1px solid var(--color-border);
        background: #fff;
        min-height: 720px;
      }
      .calculator-frame iframe {
        width: 100%;
        min-height: 720px;
        border: none;
        background: #fff;
        display: block;
      }
      .calculator-note {
        margin-top: 0;
        color: var(--color-text-muted, #555);
        font-style: italic;
      }
      @media (max-width: 768px) {
        .orders-filters {
          flex-direction: column;
          align-items: stretch;
        }
        .orders-pagination {
          justify-content: center;
        }
        .calculator-frame iframe {
          min-height: 600px;
        }
      }
    </style>
  </head>
  <body>
    <div id="admin-build-banner">Build: dev • Multi-images: ON</div>
    <header>
      <div class="header-inner">
        <div class="logo"><a href="/index.html" class="brand"><img src="../assets/IMG_3086.png" alt="NERIN" class="site-logo" /></a></div>
        <button class="menu-toggle" id="navToggle">&#9776;</button>
        <nav id="mainNav">
          <ul>
            <li><a href="/index.html">Inicio</a></li>
            <li><a href="/shop.html">Productos</a></li>
            <li><a href="/contact.html">Contacto</a></li>
            <li><a href="/seguimiento.html">Seguir mi pedido</a></li>
            <li><a href="/cart.html">Carrito</a></li>
            <li><a href="/login.html">Acceder</a></li>
          </ul>
        </nav>
        <!-- Selector de idioma -->
        <select
          id="langSelect"
          style="
            margin-left: 1rem;
            padding: 0.2rem;
            border: 1px solid var(--color-border);
            border-radius: var(--radius);
          "
        >
          <option value="es">ES</option>
          <option value="en">EN</option>
        </select>
      </div>
    </header>
    <main class="container admin-container">
      <h2 data-i18n="admin.title">Panel de administración</h2>
      <p data-i18n="admin.subtitle">
        Gestiona productos, pedidos, clientes y métricas desde aquí.
      </p>
      <div class="admin-nav">
        <button
          data-target="productsSection"
          class="active"
          data-i18n="nav.products"
        >
          Productos
        </button>
        <button data-target="ordersSection" data-i18n="nav.orders">
          Pedidos
        </button>
        <button data-target="clientsSection" data-i18n="nav.clients">
          Clientes
        </button>
        <button data-target="wholesaleSection" data-i18n="nav.wholesale">
          Mayoristas
        </button>
        <button data-target="metricsSection" data-i18n="nav.metrics">
          Métricas
        </button>
        <button data-target="calculatorSection" data-i18n="nav.calculator">
          Calculadora
        </button>
        <button data-target="returnsSection" data-i18n="nav.returns">
          Devoluciones
        </button>
        <button data-target="homeSection">Inicio</button>
        <button data-target="configSection" data-i18n="nav.config">
          Configuración
        </button>
        <button data-target="paymentSettingsSection">Pagos</button>
        <button data-target="footerSection">Footer</button>
        <button data-target="shippingSection" data-i18n="nav.shipping">
          Envíos
        </button>
        <button data-target="suppliersSection" data-i18n="nav.suppliers">
          Proveedores
        </button>
        <button data-target="purchaseOrdersSection" data-i18n="nav.purchase">
          Órdenes de compra
        </button>
        <button data-target="analyticsSection" data-i18n="nav.analytics">
          Analíticas
        </button>
      </div>
      <section id="productsSection" class="admin-section">
        <h3>Gestión de productos</h3>
        <div class="product-toolbar">
          <div class="product-summary" id="productsSummary">
            <div class="product-summary__badge">0</div>
            <div class="product-summary__details">
              <p class="product-summary__title">Sin datos disponibles</p>
              <p class="product-summary__meta">Sin filtros activos</p>
              <div class="product-summary__indicators">
                <span>Actualizá para ver estadísticas.</span>
              </div>
            </div>
          </div>
          <div class="product-filters" aria-label="Filtros de productos">
            <label class="filter-field">
              <span>Búsqueda</span>
              <input
                type="search"
                id="productSearch"
                placeholder="SKU, nombre, modelo o tag"
                autocomplete="off"
              />
            </label>
            <label class="filter-field">
              <span>Categoría</span>
              <select id="productFilterCategory">
                <option value="">Todas</option>
              </select>
            </label>
            <label class="filter-field">
              <span>Visibilidad</span>
              <select id="productFilterVisibility">
                <option value="">Todas</option>
                <option value="public">Público</option>
                <option value="private">Privado</option>
                <option value="draft">Borrador</option>
              </select>
            </label>
            <label class="filter-field">
              <span>Stock</span>
              <select id="productFilterStock">
                <option value="">Todos</option>
                <option value="low">Stock bajo</option>
                <option value="out">Sin stock</option>
              </select>
            </label>
            <label class="filter-field">
              <span>Ordenar por</span>
              <select id="productSort">
                <option value="recent">Actualizado recientemente</option>
                <option value="name">Nombre (A→Z)</option>
                <option value="stock">Stock (mayor a menor)</option>
                <option value="price_desc">Precio (min. ↓)</option>
                <option value="price_asc">Precio (min. ↑)</option>
              </select>
            </label>
          </div>
        </div>
        <div class="table-wrapper">
          <table class="admin-table" id="productsTable">
            <thead>
              <tr>
                <th><input type="checkbox" id="selectAllProducts" /></th>
                <th>SKU</th>
                <th>Nombre</th>
                <th>Marca</th>
                <th>Modelo</th>
                <th>Categoría</th>
                <th>Subcategoría</th>
                <th>Explorador</th>
                <th>Tags</th>
                <th>Stock</th>
                <th>Mín. Stock</th>
                <th>Precio (Min.)</th>
                <th>Precio (May.)</th>
                <th>Visibilidad</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <div class="product-actions">
          <button id="openProductModal" class="button primary">
            Agregar producto
          </button>
          <div class="bulk-actions">
            <select id="bulkActionSelect">
              <option value="">Acción masiva…</option>
              <option value="delete">Eliminar</option>
              <option value="vis-public">Hacer público</option>
              <option value="vis-private">Hacer privado</option>
              <option value="vis-draft">Marcar borrador</option>
              <option value="price-inc">Aumentar precios %</option>
              <option value="price-dec">Disminuir precios %</option>
            </select>
            <input
              type="number"
              id="bulkValue"
              placeholder="%"
              style="display: none"
            />
            <button id="applyBulkBtn" class="button">Aplicar</button>
          </div>
        </div>
      </section>

      <!-- Modal reutilizable para agregar/editar producto -->
      <div id="productModal" class="modal hidden">
        <div class="modal-content">
          <h4 id="modalTitle">Agregar producto</h4>
          <form id="productForm" class="admin-form form-grid">
            <input type="hidden" name="id" />
            <input type="text" id="productSku" name="sku" placeholder="SKU" required />
            <input type="text" id="productName" name="name" placeholder="Nombre" required />
            <input type="text" id="productBrand" name="brand" placeholder="Marca" />
            <input type="text" id="productModel" name="model" placeholder="Modelo" />
            <input
              type="text"
              id="productCategory"
              name="category"
              placeholder="Categoría"
              list="productCategoryOptions"
            />
            <datalist id="productCategoryOptions"></datalist>
            <input
              type="text"
              id="productSubcategory"
              name="subcategory"
              placeholder="Subcategoría"
              list="productSubcategoryOptions"
            />
            <datalist id="productSubcategoryOptions"></datalist>
            <div class="form-section form-grid-span form-section--catalog" id="catalogAssistSection">
              <div class="form-section__header">
                <h5>Catálogo y explorador</h5>
              </div>
              <p class="form-hint">
                Ajustá manualmente cómo se agrupa este repuesto en los filtros y el
                explorador por modelo. Si dejás un campo vacío usamos la
                información automática del producto.
              </p>
              <div class="catalog-grid">
                <div class="catalog-field">
                  <label for="productCatalogBrand">Marca en el explorador</label>
                  <input
                    type="text"
                    id="productCatalogBrand"
                    name="catalog_brand"
                    placeholder="Marca visible (ej. Apple)"
                    list="catalogBrandOptions"
                    autocomplete="off"
                  />
                  <datalist id="catalogBrandOptions"></datalist>
                </div>
                <div class="catalog-field">
                  <label for="productCatalogModel">Modelo agrupador</label>
                  <input
                    type="text"
                    id="productCatalogModel"
                    name="catalog_model"
                    placeholder="Modelo (ej. iPhone 12)"
                    list="catalogModelOptions"
                    autocomplete="off"
                  />
                  <datalist id="catalogModelOptions"></datalist>
                </div>
                <div class="catalog-field">
                  <label for="productCatalogPiece">Pieza / parte</label>
                  <input
                    type="text"
                    id="productCatalogPiece"
                    name="catalog_piece"
                    placeholder="Nombre de la pieza"
                    list="catalogPieceOptions"
                    autocomplete="off"
                  />
                  <datalist id="catalogPieceOptions"></datalist>
                </div>
              </div>
            </div>
            <div class="form-section form-grid-span form-section--tags" id="tagsAssistSection">
              <div class="form-section__header">
                <h5>Palabras clave y etiquetas</h5>
                <label class="assist-toggle">
                  <input type="checkbox" id="autoTagsToggle" checked />
                  <span>Generar automáticamente</span>
                </label>
              </div>
              <p class="form-hint" id="autoTagsStatus">
                Usamos marca, modelo y categoría para crear tags relevantes sin
                que tengas que escribirlos.
              </p>
              <div id="autoTagSuggestions" class="assist-preview assist-preview--chips"></div>
              <div class="tags-field">
                <input
                  type="text"
                  id="productTags"
                  name="tags"
                  placeholder="Tags (coma separados)"
                />
                <div id="tagsPreview" class="tags-preview"></div>
              </div>
            </div>
            <input
              type="number"
              id="productStock"
              name="stock"
              placeholder="Stock actual"
              min="0"
            />
            <input
              type="number"
              id="productMinStock"
              name="min_stock"
              placeholder="Stock mínimo"
              min="0"
            />
            <input
              type="number"
              id="productPriceMinorista"
              name="price_minorista"
              placeholder="Precio minorista"
              min="0"
              step="0.01"
            />
            <input
              type="number"
              id="productPriceMayorista"
              name="price_mayorista"
              placeholder="Precio mayorista"
              min="0"
              step="0.01"
            />
            <input
              type="number"
              id="productCost"
              name="cost"
              placeholder="Costo"
              min="0"
              step="0.01"
            />
            <select id="productSupplier" name="supplier_id"></select>
            <div class="form-section form-grid-span form-section--description" id="descriptionAssistSection">
              <div class="form-section__header">
                <h5>Descripción para la tienda</h5>
              </div>
              <p class="form-hint" id="descriptionAssistStatus">
                Escribí una descripción clara y simple con la información clave
                para tus clientes. Nosotros usamos el resto de los datos para
                potenciar el SEO automáticamente.
              </p>
              <textarea
                id="productDescription"
                name="description"
                placeholder="Descripción del producto"
                rows="4"
              ></textarea>
            </div>
            <div class="form-section form-grid-span form-section--seo" id="seoAssistSection">
              <div class="form-section__header">
                <h5>SEO y visibilidad</h5>
                <label class="assist-toggle">
                  <input type="checkbox" id="autoSeoToggle" checked />
                  <span>Optimizar automáticamente</span>
                </label>
              </div>
              <p class="form-hint" id="seoAssistStatus">
                Completá nombre, marca, modelo y categoría para generar título,
                URL y meta descripción perfectos.
              </p>
              <div class="assist-grid">
                <div class="assist-field">
                  <label for="productSlug">URL pública</label>
                  <input
                    type="text"
                    id="productSlug"
                    name="slug"
                    placeholder="mi-producto-estelar"
                  />
                  <p class="form-hint">
                    La generamos con la información principal. Podés ajustarla
                    si necesitás una URL personalizada.
                  </p>
                </div>
                <div class="assist-preview" id="seoPreview" aria-live="polite">
                  <p id="seoSlugPreview"></p>
                  <h5 id="seoTitlePreview"></h5>
                  <p id="seoDescPreview"></p>
                </div>
              </div>
              <button
                type="button"
                class="button-link"
                id="showSeoAdvancedBtn"
                aria-expanded="false"
              >
                Editar meta título y descripción manualmente
              </button>
            </div>
            <div id="seoAdvancedFields" class="seo-advanced form-grid-span is-collapsed">
              <label for="productSeoTitle">SEO Title (opcional)</label>
              <input
                type="text"
                id="productSeoTitle"
                name="seoTitle"
                placeholder="Módulo Pantalla Samsung Galaxy A55 5G A556 Original Service Pack GH82-34305A | NERIN Parts"
              />
              <label for="productSeoDesc">SEO Description (opcional)</label>
              <textarea
                id="productSeoDesc"
                name="seoDescription"
                placeholder="Módulo pantalla Samsung Galaxy A55 5G A556 original Service Pack GH82-34305A. Super AMOLED 6,6&quot; FHD+ 120 Hz con marco, listo para instalar. Envíos a todo Argentina, factura A/B y garantía técnica NERIN."
                rows="3"
              ></textarea>
            </div>
            <input
              type="text"
              id="productDimensions"
              name="dimensions"
              placeholder="Dimensiones (L×A×C cm)"
            />
            <input
              type="number"
              id="productWeight"
              name="weight"
              placeholder="Peso (g)"
              min="0"
            />
            <input type="text" id="productColor" name="color" placeholder="Color" />
            <select id="productVisibility" name="visibility">
              <option value="public">Público</option>
              <option value="private">Privado</option>
              <option value="draft">Borrador</option>
            </select>
            <input
              type="file"
              id="productImages"
              name="images"
              accept=".jpg,.jpeg,.png"
              multiple
            />
            <div id="imagePreview" class="image-preview"></div>
            <div class="product-preview" id="productPreview" aria-live="polite">
              <div class="product-preview__media" id="productPreviewMedia">
                <img
                  id="productPreviewImage"
                  alt="Vista previa del producto"
                  loading="lazy"
                />
                <div class="product-preview__media-placeholder" id="productPreviewPlaceholder">
                  Sin imagen
                </div>
              </div>
              <div class="product-preview__content">
                <p class="product-preview__sku" id="productPreviewSku">
                  Completá el SKU para identificar el producto.
                </p>
                <h5 class="product-preview__name" id="productPreviewName">
                  Nuevo producto sin título
                </h5>
                <p class="product-preview__price" id="productPreviewPrice">
                  Definí los precios para ver cómo se mostrará.
                </p>
                <p class="product-preview__stock" id="productPreviewStock"></p>
                <p class="product-preview__meta" id="productPreviewMeta">
                  Indicá categoría, visibilidad y URL para completar la vista previa.
                </p>
              </div>
            </div>
            <div class="form-actions">
              <button type="submit" class="button primary" id="saveProductBtn">
                Guardar
              </button>
              <button type="button" class="button danger" id="deleteProductBtn">
                Eliminar
              </button>
              <button
                type="button"
                class="button secondary"
                id="duplicateProductBtn"
              >
                Duplicar producto
              </button>
              <button type="button" class="button" id="closeModalBtn">
                Cerrar
              </button>
            </div>
          </form>
        </div>
      </div>

      <div id="clientDocumentsModal" class="modal hidden">
        <div class="modal-content modal-content--wide">
          <h4 id="clientDocumentsTitle">Documentación fiscal</h4>
          <p id="clientDocumentsSubtitle" class="modal-subtitle"></p>
          <div id="clientDocumentsBody" class="client-documents-body">
            <p class="modal-empty">Seleccioná un cliente para ver sus documentos.</p>
          </div>
          <div class="form-actions">
            <button type="button" class="button secondary" id="refreshClientDocumentsBtn">
              Actualizar
            </button>
            <button type="button" class="button" id="closeClientDocumentsBtn">
              Cerrar
            </button>
          </div>
        </div>
      </div>

      <section id="ordersSection" class="admin-section" style="display: none">
        <div id="ordersBanner" class="orders-banner"></div>
        <div id="ordersFilters" class="orders-filters">
          <div class="filter-group">
            <label for="ordersDate">Fecha</label>
            <div class="filter-inline">
              <input type="date" id="ordersDate" />
              <button type="button" id="ordersTodayBtn" class="button secondary">
                Solo hoy
              </button>
            </div>
          </div>
          <div class="filter-group">
            <label for="ordersStatus">Estado</label>
            <select id="ordersStatus">
              <option value="all">Todos</option>
              <option value="pagado">Pagado</option>
              <option value="pendiente">Pendiente</option>
              <option value="rechazado">Rechazado</option>
              <option value="cancelado">Cancelado</option>
            </select>
          </div>
          <div class="filter-group">
            <label for="ordersSearch">Buscar</label>
            <input
              type="search"
              id="ordersSearch"
              placeholder="Cliente, teléfono o número"
            />
          </div>
          <label class="filter-toggle">
            <input type="checkbox" id="ordersIncludeDeleted" /> Mostrar eliminados
          </label>
        </div>
        <div class="table-wrapper">
          <table class="admin-table" id="ordersTable">
            <thead>
              <tr>
                <th>Nº</th>
                <th>Fecha / Hora</th>
                <th>Cliente</th>
                <th>Teléfono</th>
                <th>Dirección</th>
                <th>Ítems</th>
                <th>Total</th>
                <th>Método</th>
                <th>Pago</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <div id="ordersPagination" class="orders-pagination"></div>
        </div>
        <div id="orderDetail" class="order-detail"></div>
      </section>
      <section id="clientsSection" class="admin-section" style="display: none">
        <h3>Clientes</h3>
        <p>
          Listado de clientes con su saldo y límite de crédito. Puedes registrar
          pagos para reducir su deuda.
        </p>
        <div class="table-wrapper">
          <table class="admin-table" id="clientsTable">
            <thead>
              <tr>
                <th>Email</th>
                <th>Nombre</th>
                <th>Saldo</th>
                <th>Límite</th>
                <th>Acción</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>
      <section id="wholesaleSection" class="admin-section" style="display: none">
        <div class="wholesale-header">
          <div>
            <h3>Solicitudes mayoristas</h3>
            <p class="wholesale-subtitle">
              Gestioná verificaciones, adjuntos y aprobaciones de cuentas corporativas.
            </p>
          </div>
          <div class="wholesale-header-actions">
            <button id="wholesaleRefreshBtn" class="button">Actualizar</button>
          </div>
        </div>
        <div class="wholesale-filters">
          <label class="filter">
            <span>Estado</span>
            <select id="wholesaleStatusFilter">
              <option value="all">Todos</option>
              <option value="pending_review">Pendiente</option>
              <option value="waiting_documents">Requiere documentos</option>
              <option value="approved">Aprobada</option>
              <option value="rejected">Rechazada</option>
              <option value="archived">Archivada</option>
            </select>
          </label>
          <label class="filter">
            <span>Búsqueda</span>
            <input
              type="search"
              id="wholesaleSearchInput"
              placeholder="Filtrar por razón social, CUIT o correo"
            />
          </label>
        </div>
        <div class="wholesale-grid">
          <div class="wholesale-list">
            <div class="table-wrapper">
              <table class="admin-table" id="wholesaleTable">
                <thead>
                  <tr>
                    <th>Solicitud</th>
                    <th>Estado</th>
                    <th>Razón social</th>
                    <th>Correo</th>
                    <th>Actualizado</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td colspan="5">Cargá las solicitudes para comenzar.</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="wholesale-detail" id="wholesaleDetail">
            <div class="wholesale-empty">
              <h4>Seleccioná una solicitud</h4>
              <p>
                Elegí un registro de la lista para revisar los datos enviados, agregar
                documentación y completar la aprobación.
              </p>
            </div>
          </div>
        </div>
      </section>
      <section id="metricsSection" class="admin-section" style="display: none">
        <h3>Métricas</h3>
        <div id="metricsContent"></div>
        <canvas id="salesChartCanvas" height="200"></canvas>
      </section>

      <section
        id="calculatorSection"
        class="admin-section"
        style="display: none"
      >
        <div class="calculator-wrapper">
          <header class="calculator-header">
            <h2 data-i18n="calculator.title">
              Calculadora profesional de costos
            </h2>
            <p data-i18n="calculator.description">
              Esta vista integra la herramienta completa solicitada para calcular el costo
              puesto, márgenes objetivo y precio final con IVA. Podés cargar costos en USD
              o ARS, aplicar tributos parametrizables, simular comisiones o usar un fee real
              notificado por el gateway de pago. El contenido se muestra dentro del admin
              para evitar saltar entre pantallas.
            </p>
            <p>
              <span data-i18n="calculator.linkPrompt">
                Si preferís abrirla en otra pestaña, usá este acceso directo:
              </span>
              <a
                href="/import_calc_frontend/index.html"
                target="_blank"
                rel="noopener noreferrer"
                data-i18n="calculator.linkText"
              >
                Abrir calculadora completa
              </a>
            </p>
          </header>
          <div class="calculator-frame">
            <iframe
              src="/import_calc_frontend/index.html"
              title="Calculadora de costos de importación"
              loading="lazy"
              referrerpolicy="no-referrer"
            ></iframe>
          </div>
          <p
            class="status-text calculator-note"
            data-i18n="calculator.note"
          >
            Nota: si el iframe no carga (por políticas del servidor estático), utilizá el
            enlace “Abrir calculadora completa” para acceder a la herramienta en una ventana
            nueva.
          </p>
        </div>
      </section>

      <!-- Sección de devoluciones -->
      <section id="returnsSection" class="admin-section" style="display: none">
        <h3>Devoluciones</h3>
        <p>
          Gestiona las solicitudes de devolución enviadas por los clientes.
          Puedes aprobar o rechazar cada solicitud.
        </p>
        <div class="table-wrapper">
          <table class="admin-table" id="returnsTable">
            <thead>
              <tr>
                <th>ID</th>
                <th>Pedido</th>
                <th>Cliente</th>
                <th>Fecha</th>
                <th>Motivo</th>
                <th>Estado</th>
                <th>Acción</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <!-- Sección de configuración general -->
      <section id="homeSection" class="admin-section" style="display: none">
        <h3>Inicio del sitio</h3>
        <p>
          Redactá el hero, las secciones de confianza, el bloque de productos
          destacados y el popup de novedades que se muestran en la página de
          inicio. Los cambios se aplican al guardar.
        </p>
        <form id="homeContentForm" class="admin-form home-admin-form">
          <article class="home-admin-card">
            <h4>Hero principal</h4>
            <div class="home-admin-grid">
              <label>
                Etiqueta superior
                <input
                  type="text"
                  data-home-field="hero.eyebrow"
                  placeholder="Operamos para laboratorios y cadenas"
                />
              </label>
              <label>
                Título
                <input
                  type="text"
                  data-home-field="hero.title"
                  placeholder="Pantallas y repuestos originales listos para instalar"
                />
              </label>
            </div>
            <label>
              Descripción
              <textarea
                data-home-field="hero.description"
                rows="3"
                placeholder="Mensaje principal del hero"
              ></textarea>
            </label>
            <label>
              Bullets (uno por línea)
              <textarea
                data-home-field="hero.bullets"
                rows="3"
                data-home-format="lines"
                placeholder="Stock auditado en CABA..."
              ></textarea>
            </label>
            <div class="home-admin-grid">
              <label>
                CTA principal (texto)
                <input type="text" data-home-field="hero.primaryCta.label" />
              </label>
              <label>
                CTA principal (enlace)
                <input type="text" data-home-field="hero.primaryCta.href" />
              </label>
            </div>
            <div class="home-admin-grid">
              <label>
                CTA secundaria (texto)
                <input type="text" data-home-field="hero.secondaryCta.label" />
              </label>
              <label>
                CTA secundaria (enlace)
                <input type="text" data-home-field="hero.secondaryCta.href" />
              </label>
            </div>
            <div class="home-admin-upload-grid">
              <label>
                Imagen desktop
                <input
                  type="text"
                  data-home-field="hero.media.desktop"
                  placeholder="https://"
                />
              </label>
              <label>
                Imagen mobile
                <input
                  type="text"
                  data-home-field="hero.media.mobile"
                  placeholder="https://"
                />
              </label>
              <label>
                Texto alternativo
                <input type="text" data-home-field="hero.media.alt" />
              </label>
            </div>
            <div class="home-admin-upload-preview">
              <label class="home-admin-upload-control">
                Subir imagen desktop
                <input
                  type="file"
                  accept="image/*"
                  data-home-upload="hero.media.desktop"
                />
              </label>
              <img
                data-home-preview="hero.media.desktop"
                alt="Vista previa hero desktop"
              />
              <label class="home-admin-upload-control">
                Subir imagen mobile
                <input
                  type="file"
                  accept="image/*"
                  data-home-upload="hero.media.mobile"
                />
              </label>
              <img
                data-home-preview="hero.media.mobile"
                alt="Vista previa hero mobile"
              />
            </div>
          </article>

          <article class="home-admin-card">
            <div class="home-admin-card__header">
              <h4>Bloques destacados</h4>
              <p>Se muestran debajo del hero como beneficios rápidos.</p>
            </div>
            <div
              id="homeHighlightsAdmin"
              class="home-admin-repeat"
              data-repeat-field="highlights"
            ></div>
            <button type="button" class="button secondary" id="homeAddHighlight">
              Agregar bloque
            </button>
          </article>

          <article class="home-admin-card">
            <h4>Quiénes somos</h4>
            <div class="home-admin-grid">
              <label>
                Título
                <input type="text" data-home-field="about.title" />
              </label>
              <label>
                Imagen (URL)
                <input
                  type="text"
                  data-home-field="about.image"
                  placeholder="https://"
                />
              </label>
            </div>
            <label>
              Imagen alt
              <input type="text" data-home-field="about.imageAlt" />
            </label>
            <label>
              Bajada
              <textarea data-home-field="about.lead" rows="2"></textarea>
            </label>
            <label>
              Desarrollo
              <textarea data-home-field="about.body" rows="3"></textarea>
            </label>
            <label class="home-admin-upload-control">
              Subir imagen
              <input
                type="file"
                accept="image/*"
                data-home-upload="about.image"
              />
            </label>
            <img
              data-home-preview="about.image"
              alt="Vista previa sección quiénes somos"
            />
            <div class="home-admin-card__header" style="margin-top: 1.5rem">
              <h5>Hitos</h5>
              <p>Se listan como línea de tiempo.</p>
            </div>
            <div
              id="homeMilestonesAdmin"
              class="home-admin-repeat"
              data-repeat-field="about.milestones"
            ></div>
            <button type="button" class="button secondary" id="homeAddMilestone">
              Agregar hito
            </button>
          </article>

          <article class="home-admin-card">
            <h4>Por qué elegir NERIN</h4>
            <label>
              Título
              <input type="text" data-home-field="why.title" />
            </label>
            <label>
              Descripción
              <textarea data-home-field="why.description" rows="3"></textarea>
            </label>
            <div
              id="homeWhyAdmin"
              class="home-admin-repeat"
              data-repeat-field="why.cards"
            ></div>
            <button type="button" class="button secondary" id="homeAddWhy">
              Agregar tarjeta
            </button>
          </article>

          <article class="home-admin-card">
            <h4>Contacto rápido</h4>
            <div class="home-admin-grid">
              <label>
                Eyebrow
                <input type="text" data-home-field="contact.eyebrow" />
              </label>
              <label>
                Título
                <input type="text" data-home-field="contact.title" />
              </label>
            </div>
            <label>
              Descripción
              <textarea data-home-field="contact.description" rows="3"></textarea>
            </label>
            <label>
              Nota destacada
              <textarea data-home-field="contact.note" rows="2"></textarea>
            </label>
            <div class="home-admin-card__header" style="margin-top: 1.5rem">
              <h5>Beneficios</h5>
            </div>
            <div
              id="homeContactBulletsAdmin"
              class="home-admin-repeat"
              data-repeat-field="contact.bulletPoints"
            ></div>
            <button type="button" class="button secondary" id="homeAddContactBullet">
              Agregar beneficio
            </button>
          </article>

          <article class="home-admin-card">
            <h4>Productos destacados</h4>
            <div class="home-admin-grid">
              <label>
                Título
                <input type="text" data-home-field="featured.title" />
              </label>
              <label>
                Descripción
                <input type="text" data-home-field="featured.description" />
              </label>
            </div>
            <p>
              Seleccioná hasta 6 productos para mostrar en la grilla del home.
              Se respetará el orden que elijas.
            </p>
            <label class="home-admin-search">
              Buscar producto
              <input
                type="search"
                id="homeFeaturedSearch"
                placeholder="SKU, nombre o modelo"
                autocomplete="off"
              />
            </label>
            <div id="homeFeaturedList" class="home-admin-product-list"></div>
          </article>

          <article class="home-admin-card">
            <h4>Popup de novedades</h4>
            <label class="home-admin-toggle">
              <input type="checkbox" data-home-field="popup.enabled" />
              <span>Mostrar popup al ingresar al sitio</span>
            </label>
            <div class="home-admin-grid">
              <label>
                Enlace (opcional)
                <input type="text" data-home-field="popup.link" placeholder="https://" />
              </label>
              <label>
                Texto alternativo
                <input type="text" data-home-field="popup.alt" />
              </label>
              <label>
                Repetir cada (horas)
                <input
                  type="number"
                  min="1"
                  step="1"
                  data-home-field="popup.frequencyHours"
                  data-home-type="number"
                />
              </label>
            </div>
            <label>
              Imagen (URL)
              <input type="text" data-home-field="popup.image" placeholder="https://" />
            </label>
            <label class="home-admin-upload-control">
              Subir imagen
              <input type="file" accept="image/*" data-home-upload="popup.image" />
            </label>
            <img data-home-preview="popup.image" alt="Vista previa popup" />
          </article>

          <div class="home-admin-actions">
            <button type="submit" class="button primary">Guardar cambios</button>
          </div>
        </form>
      </section>

      <section id="configSection" class="admin-section" style="display: none">
        <h3>Configuración</h3>
        <p>
          Actualiza parámetros globales como identificadores de Google
          Analytics, Meta Pixel, número de WhatsApp y la lista de transportistas
          disponibles para los envíos.
        </p>
        <form id="configForm" class="admin-form">
          <input
            type="text"
            id="configGAId"
            placeholder="Google Analytics ID (p.ej. G-XXXXXXX)"
          />
          <input type="text" id="configMetaId" placeholder="Meta Pixel ID" />
          <input
            type="text"
            id="configWhatsApp"
            placeholder="Número de WhatsApp (sin signos)"
          />
          <textarea
            id="configCarriers"
            placeholder="Transportistas por defecto (uno por línea)"
            style="
              width: 100%;
              min-height: 80px;
              padding: 0.4rem;
              border: 1px solid var(--color-border);
              border-radius: var(--radius);
            "
          ></textarea>
          <button type="submit" class="button primary">
            Guardar configuración
          </button>
        </form>
      </section>

      <section
        id="paymentSettingsSection"
        class="admin-section"
        style="display: none"
      >
        <h3>Configuración de pagos</h3>
        <p class="section-help">
          Datos oficiales para transferencias y parámetros del pago en efectivo.
          Estos datos se muestran en el checkout y en las pantallas de
          confirmación.
        </p>
        <form id="paymentSettingsForm" class="form-grid">
          <fieldset>
            <legend>Transferencia bancaria</legend>
            <label>
              <input type="checkbox" id="transferEnabled" /> Habilitar
              transferencia bancaria
            </label>
            <label>Banco
              <input type="text" id="bankName" />
            </label>
            <label>Titular
              <input type="text" id="bankHolder" />
            </label>
            <label>Tipo de cuenta
              <input type="text" id="bankType" />
            </label>
            <label>CBU
              <input type="text" id="bankCbu" />
            </label>
            <label>Alias
              <input type="text" id="bankAlias" />
            </label>
            <label>CUIT
              <input type="text" id="bankCuit" />
            </label>
            <label>Instrucciones al cliente
              <textarea id="bankInstructions" rows="3"></textarea>
            </label>
          </fieldset>
          <fieldset>
            <legend>Pago en efectivo</legend>
            <label>
              <input type="checkbox" id="cashEnabled" /> Habilitar pago en
              efectivo
            </label>
            <label>Métodos de envío habilitados
              <select id="cashAllowedMethods" multiple size="4"></select>
            </label>
            <label>Instrucciones para retiro
              <textarea id="cashPickup" rows="3"></textarea>
            </label>
            <label>Instrucciones para entrega (opcional)
              <textarea id="cashDelivery" rows="2"></textarea>
            </label>
          </fieldset>
        </form>
        <div class="form-actions">
          <button class="button primary" id="savePaymentSettingsBtn">
            Guardar
          </button>
          <span id="paymentSettingsStatus" class="status-text"></span>
        </div>
      </section>

      <!-- Editor de footer -->
      <section id="footerSection" class="admin-section" style="display: none">
        <h3>Footer</h3>
        <form id="footerForm" class="admin-form">
          <input type="text" name="brand" placeholder="Marca" />
          <input type="text" name="slogan" placeholder="Slogan" />
          <label><input type="checkbox" name="ctaEnabled" /> CTA habilitado</label>
          <input type="text" name="ctaText" placeholder="Texto CTA" />
          <input type="text" name="ctaLabel" placeholder="Etiqueta botón" />
          <input type="text" name="ctaHref" placeholder="Enlace CTA" />
          <textarea name="columns" placeholder="Columnas (JSON)" style="min-height:80px"></textarea>
          <input type="text" name="whatsapp" placeholder="WhatsApp" />
          <input type="email" name="email" placeholder="Email" />
          <input type="text" name="address" placeholder="Dirección" />
          <input type="url" name="instagram" placeholder="Instagram URL" />
          <input type="url" name="linkedin" placeholder="LinkedIn URL" />
          <input type="url" name="youtube" placeholder="YouTube URL" />
          <label><input type="checkbox" name="show_cta" /> Mostrar CTA</label>
          <label><input type="checkbox" name="show_branding" /> Mostrar branding</label>
          <label><input type="checkbox" name="show_columns" /> Mostrar columnas</label>
          <label><input type="checkbox" name="show_contact" /> Mostrar contacto</label>
          <label><input type="checkbox" name="show_social" /> Mostrar redes</label>
          <label><input type="checkbox" name="show_badges" /> Mostrar badges</label>
          <label><input type="checkbox" name="show_newsletter" /> Mostrar newsletter</label>
          <label><input type="checkbox" name="show_legal" /> Mostrar legal</label>
          <label><input type="checkbox" name="badge_mercadoPago" /> Mercado Pago</label>
          <label><input type="checkbox" name="badge_andreani" /> Andreani</label>
          <label><input type="checkbox" name="badge_efectivo" /> Efectivo</label>
          <label><input type="checkbox" name="badge_transferencia" /> Transferencia bancaria</label>
          <input type="color" name="accentFrom" value="#FFD54F" />
          <input type="color" name="accentTo" value="#FFC107" />
          <input type="color" name="bg" value="#ffffff" />
          <input type="color" name="fg" value="#111827" />
          <label>
            Modo
            <select name="themeMode">
              <option value="auto">Auto</option>
              <option value="light">Light</option>
              <option value="dark">Dark</option>
            </select>
          </label>
          <label><input type="checkbox" name="accentBar" checked /> Barra de acento</label>
          <label><input type="checkbox" name="newsEnabled" /> Newsletter habilitado</label>
          <input type="text" name="newsPlaceholder" placeholder="Placeholder newsletter" />
          <input type="text" name="newsSuccess" placeholder="Mensaje éxito" />
          <input type="text" name="cuit" placeholder="CUIT" />
          <input type="text" name="iibb" placeholder="IIBB" />
          <input type="text" name="terms" placeholder="URL Términos" />
          <input type="text" name="privacy" placeholder="URL Privacidad" />
          <div style="display:flex; gap:0.5rem; flex-wrap:wrap;">
            <button type="submit" class="button primary">Guardar</button>
            <button type="button" id="footerReset" class="button">Restaurar defaults</button>
            <button type="button" id="footerView" class="button">Ver en sitio</button>
          </div>
        </form>
      </section>

      <!-- Gestión de costos de envío -->
      <section id="shippingSection" class="admin-section" style="display: none">
        <h3>Costos de envío</h3>
        <div id="shippingAlert" class="alert" style="display: none"></div>
        <div class="table-wrapper">
          <table class="admin-table" id="shippingTable">
            <thead>
              <tr>
                <th>Provincia</th>
                <th data-method="retiro">Retiro en local ($)</th>
                <th data-method="estandar">Envío estándar ($)</th>
                <th data-method="express">Envío express ($)</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <button id="saveShippingBtn" class="button primary">
          Guardar cambios
        </button>
      </section>

      <!-- Sección de proveedores -->
      <section
        id="suppliersSection"
        class="admin-section"
        style="display: none"
      >
        <h3>Gestión de proveedores</h3>
        <p>
          Registra y administra los socios comerciales que suministran los
          productos. Aquí puedes crear, editar o eliminar proveedores.
        </p>
        <div class="table-wrapper">
          <table class="admin-table" id="suppliersTable">
            <thead>
              <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Contacto</th>
                <th>Email</th>
                <th>Teléfono</th>
                <th>Dirección</th>
                <th>Términos</th>
                <th>Valoración</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <h4>Agregar proveedor</h4>
        <form id="addSupplierForm" class="admin-form">
          <input type="text" id="supName" placeholder="Nombre" required />
          <input type="text" id="supContact" placeholder="Contacto" required />
          <input type="email" id="supEmail" placeholder="Correo electrónico" />
          <input type="text" id="supPhone" placeholder="Teléfono" />
          <input type="text" id="supAddress" placeholder="Dirección" />
          <input type="text" id="supTerms" placeholder="Condiciones de pago" />
          <input
            type="number"
            id="supRating"
            placeholder="Valoración (0–5)"
            step="0.1"
            min="0"
            max="5"
          />
          <button type="submit" class="button primary">
            Agregar proveedor
          </button>
        </form>
      </section>

      <!-- Sección de órdenes de compra -->
      <section
        id="purchaseOrdersSection"
        class="admin-section"
        style="display: none"
      >
        <h3>Órdenes de compra</h3>
        <p>
          Genera solicitudes de compra a tus proveedores cuando necesites
          reponer stock. Cambia el estado a <em>recibido</em> para actualizar
          automáticamente el inventario.
        </p>
        <div class="table-wrapper">
          <table class="admin-table" id="purchaseOrdersTable">
            <thead>
              <tr>
                <th>ID</th>
                <th>Fecha</th>
                <th>Proveedor</th>
                <th>Ítems</th>
                <th>Estado</th>
                <th>Fecha estimada</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <h4>Crear orden de compra</h4>
        <form id="addPurchaseOrderForm" class="admin-form">
          <select id="poSupplierSelect" required>
            <option value="">Seleccionar proveedor</option>
          </select>
          <div id="poItemsContainer" class="po-items-container">
            <!-- Se agregarán inputs dinámicamente -->
          </div>
          <button type="button" id="addPoItemBtn" class="button">
            Añadir ítem
          </button>
          <input
            type="date"
            id="poEta"
            placeholder="Fecha estimada de recepción"
          />
          <button type="submit" class="button primary">Crear orden</button>
        </form>
      </section>

      <!-- Sección de analíticas avanzadas -->
      <section
        id="analyticsSection"
        class="admin-section"
        style="display: none"
      >
        <h3>Analíticas detalladas</h3>
        <p>
          Consulta estadísticas avanzadas sobre tus ventas, categorías,
          devoluciones y clientes. Estas métricas te ayudan a tomar decisiones
          informadas.
        </p>
        <div id="analytics-dashboard"></div>
      </section>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      window.__NERIN_ADMIN_BUILD__ = "20241002-nerin-01";
    </script>
    <script type="module" src="/js/admin.js?v=20241002-nerin-01"></script>
    <!-- Configuración y analíticas globales -->
    <script type="module" src="/admin-footer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script type="module" src="/js/config.js"></script>
    <!-- Traducciones -->
    <script type="module" src="/js/lang.js"></script>
  </body>
</html>
